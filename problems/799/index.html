<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Champagne Tower Visualizer ‚Äî LeetCode #799</title>
  <meta name="description"
    content="Interactive visualizer for the Champagne Tower problem (LeetCode #799). Watch champagne overflow through a pyramid of glasses with step-by-step DP animation." />
  <link rel="stylesheet" href="../../shared/theme.css" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header__brand">
        <span class="header__icon">ü•Ç</span>
        <h1 class="header__title">Champagne Tower</h1>
        <span class="header__badge">LeetCode #799</span>
      </div>
      <p class="header__subtitle">Watch champagne cascade through a pyramid of glasses</p>
    </header>

    <main class="main">
      <!-- Controls Panel -->
      <aside class="panel controls-panel">
        <h2 class="panel__title">Controls</h2>

        <div class="control-group">
          <label class="control-label" for="pouredSlider">
            Cups Poured
            <span class="control-value" id="pouredValue">4</span>
          </label>
          <input type="range" id="pouredSlider" class="slider" min="0" max="50" step="1" value="4" />
          <input type="number" id="pouredNumber" class="number-input" min="0" max="100" step="0.5" value="4" />
        </div>

        <div class="control-group">
          <label class="control-label" for="queryRow">
            Query Row
            <span class="control-value" id="queryRowValue">2</span>
          </label>
          <input type="range" id="queryRow" class="slider" min="0" max="9" step="1" value="2" />
        </div>

        <div class="control-group">
          <label class="control-label" for="queryGlass">
            Query Glass
            <span class="control-value" id="queryGlassValue">1</span>
          </label>
          <input type="range" id="queryGlass" class="slider" min="0" max="9" step="1" value="1" />
        </div>

        <div class="control-group">
          <label class="control-label" for="maxRows">
            Pyramid Rows
            <span class="control-value" id="maxRowsValue">7</span>
          </label>
          <input type="range" id="maxRows" class="slider" min="3" max="10" step="1" value="7" />
        </div>

        <div class="control-group">
          <label class="control-label" for="speedSlider">
            Animation Speed
            <span class="control-value" id="speedValue">1√ó</span>
          </label>
          <input type="range" id="speedSlider" class="slider" min="1" max="5" step="1" value="2" />
        </div>

        <div class="button-row">
          <button id="btnPour" class="btn btn--primary">
            <span class="btn__icon">‚ñ∂</span> Pour
          </button>
          <button id="btnStep" class="btn btn--secondary">
            <span class="btn__icon">‚è≠</span> Step
          </button>
          <button id="btnReset" class="btn btn--ghost">
            <span class="btn__icon">‚Ü∫</span> Reset
          </button>
        </div>

        <!-- Result display -->
        <div class="result-card" id="resultCard">
          <div class="result-card__label">Glass [<span id="resRow">2</span>][<span id="resGlass">1</span>]</div>
          <div class="result-card__value" id="resValue">‚Äî</div>
          <div class="result-card__bar-track">
            <div class="result-card__bar-fill" id="resBar"></div>
          </div>
        </div>
      </aside>

      <!-- Pyramid Area -->
      <section class="pyramid-section">
        <svg id="pyramidSvg" class="pyramid-svg" preserveAspectRatio="xMidYMid meet">
          <defs>
            <!-- Champagne gradient -->
            <linearGradient id="champagneGrad" x1="0" y1="1" x2="0" y2="0">
              <stop offset="0%" stop-color="#F5C518" />
              <stop offset="100%" stop-color="#FFE082" />
            </linearGradient>
            <linearGradient id="champagneGradDark" x1="0" y1="1" x2="0" y2="0">
              <stop offset="0%" stop-color="#D4A017" />
              <stop offset="100%" stop-color="#F5C518" />
            </linearGradient>
            <!-- Glass shape filter (glow) -->
            <filter id="glassGlow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="4" result="blur" />
              <feMerge>
                <feMergeNode in="blur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
            <!-- Query glass pulsing glow -->
            <filter id="queryGlow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="8" result="blur" />
              <feMerge>
                <feMergeNode in="blur" />
                <feMergeNode in="blur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
            <!-- Drop particle -->
            <radialGradient id="dropGrad">
              <stop offset="0%" stop-color="#FFE082" stop-opacity="0.9" />
              <stop offset="100%" stop-color="#F5C518" stop-opacity="0.3" />
            </radialGradient>
          </defs>
          <g id="pyramidGroup"></g>
          <g id="particlesGroup"></g>
        </svg>
      </section>

      <!-- Algorithm Panel -->
      <aside class="panel algo-panel">
        <h2 class="panel__title">Algorithm</h2>
        <div class="algo-steps">
          <div class="algo-step" id="algoStep0">
            <div class="algo-step__num">1</div>
            <div class="algo-step__text">
              Initialize <code>dp[0][0] = poured</code>
            </div>
          </div>
          <div class="algo-step" id="algoStep1">
            <div class="algo-step__num">2</div>
            <div class="algo-step__text">
              For each glass <code>(i, j)</code>, compute overflow:
              <code class="block">overflow = max(0, dp[i][j] - 1)</code>
            </div>
          </div>
          <div class="algo-step" id="algoStep2">
            <div class="algo-step__num">3</div>
            <div class="algo-step__text">
              Distribute overflow equally:
              <code class="block">dp[i+1][j] += overflow / 2</code>
              <code class="block">dp[i+1][j+1] += overflow / 2</code>
            </div>
          </div>
          <div class="algo-step" id="algoStep3">
            <div class="algo-step__num">4</div>
            <div class="algo-step__text">
              Answer = <code>min(1, dp[row][glass])</code>
            </div>
          </div>
        </div>

        <!-- Current step info -->
        <div class="step-info" id="stepInfo">
          <div class="step-info__label">Current Row</div>
          <div class="step-info__value" id="currentRowDisplay">‚Äî</div>
        </div>

        <div class="dp-table-container" id="dpTableContainer">
          <h3 class="panel__subtitle">DP Table</h3>
          <div class="dp-table" id="dpTable"></div>
        </div>
      </aside>
    </main>
  </div>

  <script src="app.js"></script>
</body>

</html>